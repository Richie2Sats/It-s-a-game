<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üî• Live RPS Battle</title>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database-compat.js"></script>
  <style>
    body { font-family: Arial; text-align: center; background: linear-gradient(45deg, #667eea, #764ba2, #f093fb, #f5576c); background-size: 400% 400%; animation: gradientShift 10s ease infinite; color: white; margin: 0; padding: 20px; min-height: 100vh; }
    @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    input, button { padding: 15px; margin: 10px; font-size: 18px; border: none; border-radius: 15px; width: 90%; max-width: 300px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); transition: all 0.3s; }
    button { background: linear-gradient(45deg, #ff6b6b, #ee5a52); color: white; cursor: pointer; font-weight: bold; }
    button:hover { transform: scale(1.05) rotate(2deg); box-shadow: 0 8px 25px rgba(255,107,107,0.6); }
    button:disabled { background: gray; transform: none; }
    #status { font-size: 24px; margin: 20px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    #choices { display: none; }
    .rps-btn { width: 28%; background: linear-gradient(45deg, #4ecdc4, #44a08d); margin: 5px; font-size: 28px; border-radius: 20px; box-shadow: 0 6px 20px rgba(0,0,0,0.4); transition: all 0.2s; }
    .rps-btn:hover { transform: scale(1.1) rotate(5deg); box-shadow: 0 10px 30px rgba(78,205,196,0.8); filter: brightness(1.2); }
    .rps-btn:active { animation: shake 0.5s; transform: scale(0.95); }
    @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
    .score { font-size: 32px; margin: 10px; font-weight: bold; animation: scorePop 0.5s; }
    @keyframes scorePop { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
    .winner { animation: flash 0.5s infinite, bounce 0.6s infinite; color: gold !important; font-size: 28px; text-shadow: 0 0 20px gold; }
    @keyframes flash { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    #confetti-canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 1000; }
    #victory { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.9); padding: 40px; border-radius: 20px; font-size: 36px; color: gold; animation: victoryPulse 1s infinite; z-index: 2000; }
    @keyframes victoryPulse { 0% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.1); } 100% { transform: translate(-50%, -50%) scale(1); } }
    @media (max-width: 600px) { .rps-btn { width: 30%; font-size: 24px; } }
  </style>
</head>
<body>
  <canvas id="confetti-canvas"></canvas>
  <div id="victory">üèÜ VICTORY! üèÜ<br><button onclick="resetVictory()" style="margin-top: 20px; padding: 10px 20px; font-size: 20px;">Rematch!</button></div>
  <h1>üî• Live Rock Paper Scissors Battle</h1>
  <p>Share room code with a friend!</p>
  <input id="room" placeholder="Enter Room (e.g., battle123)" maxlength="20">
  <button onclick="joinRoom()">Join/Create Room</button>
  <div id="status">Waiting...</div>
  <div id="scores"></div>
  <div id="choices">
    <button class="rps-btn" onclick="pick('rock')">ü™® Rock</button>
    <button class="rps-btn" onclick="pick('paper')">üìÑ Paper</button>
    <button class="rps-btn" onclick="pick('scissors')">‚úÇÔ∏è Scissors</button>
  </div>
  <div id="result"></div>

  <script>
    // Firebase config (your keys)
    const firebaseConfig = {
      apiKey: "AIzaSyDxwj